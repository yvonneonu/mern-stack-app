(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3128:function(e,t,n){Promise.resolve().then(n.bind(n,2379))},2026:function(e,t,n){"use strict";n.d(t,{i:function(){return c},b:function(){return d}});var s=n(7437),r=n(2265),i=n(5230),a=e=>{let{message:t,type:n,onClose:i}=e;return(0,r.useEffect)(()=>{let e=setTimeout(()=>{i()},5e3);return()=>{clearTimeout(e)}},[i]),(0,s.jsx)("div",{className:"SUCCESS"===n?"fixed top-4 right-4 z-50 p-4 rounded-md bg-green-600 text-white max-w-md":"fixed top-4 right-4 z-50 p-4 rounded-md bg-red-600 text-white max-w-md",children:(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)("span",{className:"text-lg font-semibold",children:t})})})},l=n(301);let o=r.createContext(void 0),c=e=>{let{children:t}=e,[n,c]=(0,r.useState)(void 0),{isError:d}=(0,i.useQuery)("validateToken",l.Rp,{retry:!1});return(0,s.jsxs)(o.Provider,{value:{showToast:e=>{c(e)},isLoggedIn:!d},children:[n&&(0,s.jsx)(a,{message:n.message,type:n.type,onClose:()=>c(void 0)}),t]})},d=()=>(0,r.useContext)(o)},2379:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n(7437),r=n(3445),i=n.n(r);n(2445),n(2265);var a=n(8792),l=n(2026),o=n(5230),c=n(301),d=()=>{let e=(0,o.useQueryClient)(),{showToast:t}=(0,l.b)(),n=(0,o.useMutation)(c.w7,{onSuccess:async()=>{await e.invalidateQueries("validateToken"),t({message:"Signed Out!",type:"SUCCESS"})},onError:e=>{t({message:e.message,type:"ERROR"})}});return(0,s.jsx)("button",{onClick:()=>{n.mutate()},className:"text-blue-600 px-3 font-bold bg-white hover:bg-gray-100 ",children:"Sign Out"})},u=()=>{let{isLoggedIn:e}=(0,l.b)();return(0,s.jsx)("div",{className:"bg-blue-800 py-6",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between",children:[(0,s.jsx)("span",{className:"text-3xl text-white font-bold tracking-tight",children:(0,s.jsx)(a.default,{href:"/",children:"MernHolidays.com"})}),(0,s.jsx)("span",{className:"flex space-x-2",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.default,{className:"flex items-center text-white px-3 font-bold hover:bg-blue-600",href:"/my-bookings",children:"My Bookings"}),(0,s.jsx)(a.default,{className:"flex items-center text-white px-3 font-bold hover:bg-blue-600",href:"/my-hotels",children:"My Hotels"}),(0,s.jsx)(d,{})]}):(0,s.jsx)(a.default,{href:"/sign-in",className:"flex bg-white items-center text-blue-600 px-3 font-bold hover:bg-gray-100",children:"Sign In"})})]})})},x=()=>(0,s.jsx)("div",{className:"bg-blue-800 pb-16",children:(0,s.jsxs)("div",{className:"container mx-auto flex flex-col gap-2",children:[(0,s.jsx)("h1",{className:"text-5xl text-white font-bold",children:"Find your next stay"}),(0,s.jsx)("p",{className:"text-2xl text-white",children:"Search low prices on hotels for your dream vacation..."})]})}),h=()=>(0,s.jsx)("div",{className:"bg-blue-800 py-10",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-3xl text-white font-bold tracking-tight",children:"MernHolidays.com"}),(0,s.jsxs)("span",{className:"text-white font-bold tracking-tight flex gap-4",children:[(0,s.jsx)("p",{className:"cursor-pointer",children:"Privacy Policy"}),(0,s.jsx)("p",{className:"cursor-pointer",children:"Terms of Service"})]})]})});let f=new o.QueryClient({defaultOptions:{queries:{retry:0}}});function m(e){let{children:t}=e;return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:i().className,children:(0,s.jsx)(o.QueryClientProvider,{client:f,children:(0,s.jsxs)(l.i,{children:[(0,s.jsx)(u,{}),(0,s.jsx)(x,{}),t,(0,s.jsx)(h,{})]})})})})}},301:function(e,t,n){"use strict";n.d(t,{Rp:function(){return a},w7:function(){return l},z2:function(){return r},zB:function(){return i}});let s=n(9079).env.NEXT_APP_API_BASE_URL||"",r=async e=>{let t=await fetch("".concat(s,"/api/users/register"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw Error(n.message)},i=async e=>{let t=await fetch("".concat(s,"/api/auth/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw Error(n.message);return n},a=async()=>{let e=await fetch("".concat(s,"/api/auth/validate-token"),{credentials:"include"});if(!e.ok)throw Error("Invalid token");return e.json()},l=async()=>{let e=await fetch("".concat(s,"/api/auth/logout"),{credentials:"include",method:"POST"});if(!e.ok)throw Error("Error during sign out");return e.json()}},2445:function(){},3445:function(e){e.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}}},function(e){e.O(0,[142,792,971,69,744],function(){return e(e.s=3128)}),_N_E=e.O()}]);