(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{3727:function(e,s,t){Promise.resolve().then(t.bind(t,5262))},2026:function(e,s,t){"use strict";t.d(s,{i:function(){return d},b:function(){return c}});var a=t(7437),r=t(2265),n=t(5230),i=e=>{let{message:s,type:t,onClose:n}=e;return(0,r.useEffect)(()=>{let e=setTimeout(()=>{n()},5e3);return()=>{clearTimeout(e)}},[n]),(0,a.jsx)("div",{className:"SUCCESS"===t?"fixed top-4 right-4 z-50 p-4 rounded-md bg-green-600 text-white max-w-md":"fixed top-4 right-4 z-50 p-4 rounded-md bg-red-600 text-white max-w-md",children:(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)("span",{className:"text-lg font-semibold",children:s})})})},o=t(301);let l=r.createContext(void 0),d=e=>{let{children:s}=e,[t,d]=(0,r.useState)(void 0),{isError:c}=(0,n.useQuery)("validateToken",o.Rp,{retry:!1});return(0,a.jsxs)(l.Provider,{value:{showToast:e=>{d(e)},isLoggedIn:!c},children:[t&&(0,a.jsx)(i,{message:t.message,type:t.type,onClose:()=>d(void 0)}),s]})},c=()=>(0,r.useContext)(l)},5262:function(e,s,t){"use strict";t.r(s);var a=t(7437),r=t(2670),n=t(5230),i=t(301),o=t(2026),l=t(7907);s.default=()=>{let e=(0,n.useQueryClient)(),{showToast:s}=(0,o.b)(),t=(0,l.useRouter)(),{register:d,watch:c,handleSubmit:u,formState:{errors:m}}=(0,r.cI)(),f=(0,n.useMutation)(i.z2,{onSuccess:async()=>{s({message:"Registration Success!",type:"SUCCESS"}),await e.invalidateQueries("validateToken"),t.push("/")},onError:e=>{s({message:e.message,type:"ERROR"})}}),x=u(e=>{f.mutate(e)});return(0,a.jsxs)("form",{className:"container mx-auto py-5 flex flex-col gap-5",onSubmit:x,children:[(0,a.jsx)("h2",{className:"text-3xl font-bold",children:"Create an Account"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-5",children:[(0,a.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["First Name",(0,a.jsx)("input",{className:"border rounded w-full py-1 px-2 font-normal",...d("firstName",{required:"This field is required"})}),m.firstName&&(0,a.jsx)("span",{className:"text-red-500",children:m.firstName.message})]}),(0,a.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Last Name",(0,a.jsx)("input",{className:"border rounded w-full py-1 px-2 font-normal",...d("lastName",{required:"This field is required"})}),m.lastName&&(0,a.jsx)("span",{className:"text-red-500",children:m.lastName.message})]})]}),(0,a.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Email",(0,a.jsx)("input",{type:"email",className:"border rounded w-full py-1 px-2 font-normal",...d("email",{required:"This field is required"})}),m.email&&(0,a.jsx)("span",{className:"text-red-500",children:m.email.message})]}),(0,a.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Password",(0,a.jsx)("input",{type:"password",className:"border rounded w-full py-1 px-2 font-normal",...d("password",{required:"This field is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),m.password&&(0,a.jsx)("span",{className:"text-red-500",children:m.password.message})]}),(0,a.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Confirm Password",(0,a.jsx)("input",{type:"password",className:"border rounded w-full py-1 px-2 font-normal",...d("confirmPassword",{validate:e=>e?c("password")!==e?"Your passwords do no match":void 0:"This field is required"})}),m.confirmPassword&&(0,a.jsx)("span",{className:"text-red-500",children:m.confirmPassword.message})]}),(0,a.jsx)("span",{children:(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white p-2 font-bold hover:bg-blue-500 text-xl",children:"Create Account"})})]})}},301:function(e,s,t){"use strict";t.d(s,{Rp:function(){return i},w7:function(){return o},z2:function(){return r},zB:function(){return n}});let a=t(9079).env.NEXT_APP_API_BASE_URL||"",r=async e=>{let s=await fetch("".concat(a,"/api/users/register"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();if(!s.ok)throw Error(t.message)},n=async e=>{let s=await fetch("".concat(a,"/api/auth/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();if(!s.ok)throw Error(t.message);return t},i=async()=>{let e=await fetch("".concat(a,"/api/auth/validate-token"),{credentials:"include"});if(!e.ok)throw Error("Invalid token");return e.json()},o=async()=>{let e=await fetch("".concat(a,"/api/auth/logout"),{credentials:"include",method:"POST"});if(!e.ok)throw Error("Error during sign out");return e.json()}}},function(e){e.O(0,[142,884,971,69,744],function(){return e(e.s=3727)}),_N_E=e.O()}]);