(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{9989:function(e,t,s){Promise.resolve().then(s.bind(s,9525))},2026:function(e,t,s){"use strict";s.d(t,{i:function(){return c},b:function(){return u}});var n=s(7437),r=s(2265),a=s(5230),i=e=>{let{message:t,type:s,onClose:a}=e;return(0,r.useEffect)(()=>{let e=setTimeout(()=>{a()},5e3);return()=>{clearTimeout(e)}},[a]),(0,n.jsx)("div",{className:"SUCCESS"===s?"fixed top-4 right-4 z-50 p-4 rounded-md bg-green-600 text-white max-w-md":"fixed top-4 right-4 z-50 p-4 rounded-md bg-red-600 text-white max-w-md",children:(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)("span",{className:"text-lg font-semibold",children:t})})})},o=s(301);let l=r.createContext(void 0),c=e=>{let{children:t}=e,[s,c]=(0,r.useState)(void 0),{isError:u}=(0,a.useQuery)("validateToken",o.Rp,{retry:!1});return(0,n.jsxs)(l.Provider,{value:{showToast:e=>{c(e)},isLoggedIn:!u},children:[s&&(0,n.jsx)(i,{message:s.message,type:s.type,onClose:()=>c(void 0)}),t]})},u=()=>(0,r.useContext)(l)},301:function(e,t,s){"use strict";s.d(t,{Rp:function(){return i},w7:function(){return o},z2:function(){return r},zB:function(){return a}});let n=s(9079).env.NEXT_APP_API_BASE_URL||"",r=async e=>{let t=await fetch("".concat(n,"/api/users/register"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!t.ok)throw Error(s.message)},a=async e=>{let t=await fetch("".concat(n,"/api/auth/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!t.ok)throw Error(s.message);return s},i=async()=>{let e=await fetch("".concat(n,"/api/auth/validate-token"),{credentials:"include"});if(!e.ok)throw Error("Invalid token");return e.json()},o=async()=>{let e=await fetch("".concat(n,"/api/auth/logout"),{credentials:"include",method:"POST"});if(!e.ok)throw Error("Error during sign out");return e.json()}},9525:function(e,t,s){"use strict";s.r(t);var n=s(7437),r=s(2670),a=s(5230),i=s(301),o=s(2026),l=s(8792),c=s(7907);t.default=()=>{let{showToast:e}=(0,o.b)(),t=(0,a.useQueryClient)(),s=(0,c.useRouter)(),{register:u,formState:{errors:d},handleSubmit:m}=(0,r.cI)(),f=(0,a.useMutation)(i.zB,{onSuccess:async()=>{e({message:"Sign in Successful!",type:"SUCCESS"}),await t.invalidateQueries("validateToken"),s.push("/")},onError:t=>{e({message:t.message,type:"ERROR"})}}),h=m(e=>{f.mutate(e)});return(0,n.jsxs)("form",{className:"container flex flex-col gap-5",onSubmit:h,children:[(0,n.jsx)("h2",{className:"text-3xl font-bold",children:"Sign In"}),(0,n.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Email",(0,n.jsx)("input",{type:"email",className:"border rounded w-full py-1 px-2 font-normal",...u("email",{required:"This field is required"})}),d.email&&(0,n.jsx)("span",{className:"text-red-500",children:d.email.message})]}),(0,n.jsxs)("label",{className:"text-gray-700 text-sm font-bold flex-1",children:["Password",(0,n.jsx)("input",{type:"password",className:"border rounded w-full py-1 px-2 font-normal",...u("password",{required:"This field is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),d.password&&(0,n.jsx)("span",{className:"text-red-500",children:d.password.message})]}),(0,n.jsxs)("span",{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{className:"text-sm",children:["Not Registered?"," ",(0,n.jsx)(l.default,{className:"underline",href:"/register",children:"Create an account here"})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-600 text-white p-2 font-bold hover:bg-blue-500 text-xl",children:"Login"})]})]})}}},function(e){e.O(0,[142,884,792,971,69,744],function(){return e(e.s=9989)}),_N_E=e.O()}]);